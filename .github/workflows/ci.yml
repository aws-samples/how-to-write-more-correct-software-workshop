name: ci

on: 
  pull_request:
  push:
    branches:
      - main

jobs:

  steps:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - run: make steps_are_complete
    - run: make specifications_are_the_same
    - run: make makefiles_are_the_same

    - name: Install txm for running test
      run: npm install txm
    - run: make txm_steps
  
  container:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Build and run dev container task
      uses: devcontainers/ci@v0.2
      with:
        runCmd: |
          make verify_complete
          make assert_unchanged
